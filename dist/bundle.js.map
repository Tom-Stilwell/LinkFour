{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./board.js","webpack:///./game-view.js","webpack:///./game.js","webpack:///./index.js"],"names":["Board","constructor","cells","Array","i","push","updateCell","bind","reset","j","pos","marker","row","col","GameView","ctx","width","height","game","display","posX","posY","radius","circles","Math","round","color","drawBoard","clearRect","beginPath","fillStyle","rect","Object","values","fill","closePath","drawCircles","forEach","circle","board","arc","PI","findClickedCircle","clicked","sqrt","pow","circleFillInEvent","event","clientX","clientY","makeMove","resetCircles","Game","currentPlayer","winner","undefined","deltas","isOver","alert","changePlayer","counter","over","current","next","delta","document","addEventListener","canvas","getElementById","getContext","W","window","innerWidth","H","innerHeight","resetButton","initialRender","gameView"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./index.js\");\n","export default class Board {\n  constructor() {\n    this.cells = new Array();\n\n    for (let i = 0; i < 6; i++) {\n      this.cells.push(new Array(null, null, null, null, null, null, null));\n    }\n\n    this.updateCell = this.updateCell.bind(this);\n  }\n\n  reset() {\n    for (let i = 0; i < 6; i++) {\n      for (let j = 0; j < 7; j++) {\n        this.cells[i][j] = null;\n      }\n    }\n  }\n\n  updateCell(pos, marker) {\n    const row = pos[0];\n    const col = pos[1];\n    // const marker = player.marker;\n    this.cells[row][col] = marker;\n  }\n}\n","export default class GameView {\n  constructor(ctx, width, height, game) {\n    this.ctx = ctx;\n    this.width = width;\n    this.height = height;\n    this.game = game;\n\n    this.display = {\n      posX: 100,\n      posY: 100,\n      width: this.width,\n      height: this.height\n    };\n    this.radius = this.display.width / 20;\n    this.circles = [];\n\n    for (let row = 1; row <= 6; row++) {\n      for (let col = 1; col <= 7; col++) {\n        this.circles.push({\n          pos: [\n            Math.round(this.display.posX + col * this.display.width / 8),\n            Math.round(this.display.posY + row * this.display.height / 7)\n          ],\n          color: \"ivory\",\n          row: row - 1,\n          col: col - 1\n        });\n      }\n    }\n  }\n\n  drawBoard() {\n    this.ctx.clearRect(\n      this.display.posX,\n      this.display.posY,\n      this.width,\n      this.height\n    );\n    this.ctx.beginPath();\n    this.ctx.fillStyle = \"yellow\";\n    this.ctx.rect(...Object.values(this.display));\n    this.ctx.fill();\n    this.ctx.closePath();\n\n    this.drawCircles();\n  }\n\n  drawCircles() {\n    let marker;\n    this.circles.forEach(circle => {\n      marker = this.game.board.cells[circle.row][circle.col];\n      circle.color = marker ? marker : \"ivory\";\n      this.ctx.beginPath();\n      this.ctx.fillStyle = circle.color;\n      this.ctx.arc(...circle.pos, this.radius, 0, 2 * Math.PI, false);\n      this.ctx.fill();\n      this.ctx.closePath();\n    });\n  }\n\n  findClickedCircle(pos) {\n    let clicked;\n    this.circles.forEach(circle => {\n      if (\n        Math.sqrt(\n          Math.pow(pos[0] - circle.pos[0], 2) +\n            Math.pow(pos[1] - circle.pos[1], 2)\n        ) < this.radius\n      ) {\n        clicked = circle;\n      }\n    });\n\n    return clicked;\n  }\n\n  circleFillInEvent(event) {\n    const pos = [event.clientX, event.clientY];\n    const clicked = this.findClickedCircle(pos);\n\n    if (clicked && clicked.color === \"ivory\") {\n      this.game.makeMove([clicked.row, clicked.col]);\n    }\n    this.drawCircles();\n  }\n\n  resetCircles() {\n    this.circles.forEach(circle => (circle.color = \"ivory\"));\n  }\n}\n","import Board from \"./board\";\nimport Player from \"./player\";\n\nexport default class Game {\n  constructor() {\n    this.currentPlayer = \"black\";\n    this.winner = undefined;\n    this.board = new Board();\n\n    this.deltas = [\n      [0, 1],\n      [0, -1],\n      [1, 0],\n      [-1, 0],\n      [1, 1],\n      [1, -1],\n      [-1, 1],\n      [-1, -1]\n    ];\n  }\n\n  makeMove(pos) {\n    while (pos[0] + 1 <= 5 && this.board.cells[pos[0] + 1][pos[1]] === null) {\n      pos[0] += 1;\n    }\n    // debugger;\n    this.board.updateCell(pos, this.currentPlayer);\n    if (this.isOver()) {\n      alert(`${this.winner} is the winner`);\n    }\n    this.changePlayer();\n  }\n\n  changePlayer() {\n    this.currentPlayer = this.currentPlayer === \"black\" ? \"red\" : \"black\";\n  }\n\n  isOver() {\n    let marker;\n    let counter;\n    let over = false;\n    for (let i = 0; i < 6; i++) {\n      for (let j = 0; j < 7; j++) {\n        marker = this.board.cells[i][j];\n        if (!marker) {\n          continue;\n        }\n        let current = [i, j];\n        let next;\n\n        this.deltas.forEach(delta => {\n          counter = 1;\n          next = [delta[0] + i, delta[1] + j];\n\n          while (\n            next[0] >= 0 &&\n            next[0] <= 5 &&\n            next[1] >= 0 &&\n            next[1] <= 6 &&\n            this.board.cells[next[0]][next[1]] === marker\n          ) {\n            counter++;\n            if (counter === 4) {\n              this.winner = marker;\n              over = true;\n            }\n            next = [next[0] + delta[0], next[1] + delta[1]];\n          }\n        });\n      }\n    }\n\n    return over;\n  }\n\n  reset() {\n    this.board.reset();\n  }\n}\n","import GameView from \"./game-view.js\";\nimport Game from \"./game.js\";\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const canvas = document.getElementById(\"game-canvas\");\n  const ctx = canvas.getContext(\"2d\");\n  const W = window.innerWidth;\n  const H = window.innerHeight;\n  canvas.width = W / 3;\n  canvas.height = W / 3.5;\n\n  const resetButton = document.getElementById(\"reset\");\n\n  function initialRender() {\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    const game = new Game();\n    const gameView = new GameView(\n      ctx,\n      canvas.width - 100,\n      canvas.height - 100,\n      game\n    );\n    gameView.drawBoard();\n\n    document.addEventListener(\"click\", event =>\n      gameView.circleFillInEvent(event)\n    );\n    resetButton.addEventListener(\"click\", () => {\n      gameView.resetCircles();\n      gameView.drawBoard();\n      game.reset();\n    });\n  }\n\n  initialRender();\n});\n"],"sourceRoot":""}